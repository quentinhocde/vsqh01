(function(){"use strict";(function(R){const k=".vsqh01-1-slider{display:block;position:relative;width:100vw;height:100vh;inset:0;z-index:1;font-family:'Instrument Serif',serif;&:not(.is-init){cursor:wait !important}}.vsqh01-1-slider_track{position:absolute;width:100vw;height:100vh;display:grid;place-items:center;overflow:hidden;color:white;background-color:black}.vsqh01-1-slider_list{perspective:1500px;aspect-ratio:9/16;opacity:0;transition:opacity 1s ease-out;.vsqh01-1-slider.is-init &{opacity:1}@media (orientation:landscape){height:75vh}@media (orientation:portrait){height:75vw}}.vsqh01-1-slider_card{position:absolute;inset:0;border-radius:12px;overflow:hidden;will-change:transform;backface-visibility:hidden;contain:layout paint;transform-style:preserve-3d;img{width:100%;height:100%;object-fit:cover}&::after{content:'';position:absolute;inset:0;opacity:0;background-color:black;opacity:calc(1 - var(--relativeProgress))}}.vsqh01-1-drag-proxy{visibility:hidden;position:absolute;inset:0}";function E(){if(typeof document>"u"||document.getElementById("vsqh01-1-styles"))return;const t=document.createElement("style");t.id="vsqh01-1-styles",t.textContent=k,document.head.appendChild(t)}function z(t,d,g){let a=Math.ceil(1/d),f=t.length*d+.5,v=(t.length+a)*d+1,h=gsap.timeline({paused:!0}),m=gsap.timeline({paused:!0,repeat:-1,onRepeat(){this._time===this._dur&&(this._tTime+=this._dur-.01)}}),q=t.length+a*2,l,o,y;for(o=0;o<q;o++)y=o%t.length,l=o*d,h.add(g(t[y],y),l),o<=t.length&&m.add("label"+o,l);h.time(f);let S=Math.min(a*d+1,f-.01);return m.to(h,{time:v,duration:v-f,ease:"none"}).fromTo(h,{time:S},{time:f,duration:f-S,immediateRender:!1,ease:"none"}),m}function P(t){if(gsap.registerPlugin(ScrollTrigger,Draggable),!t.querySelector(".vsqh01-1-drag-proxy")){const e=document.createElement("div");e.className="vsqh01-1-drag-proxy",t.appendChild(e)}let d=0;const g=.18,a=t,f=t.querySelector(".vsqh01-1-slider_track"),v=gsap.utils.toArray(t.querySelectorAll(".vsqh01-1-slider_card")),h=gsap.utils.toArray(t.querySelectorAll(".vsqh01-1-slider_card img")),m=gsap.utils.snap(g),q=typeof a.dataset.disableMagnet=="string",l=typeof a.dataset.disableFullscreen=="string",o=typeof a.dataset.scrollRatio=="string"?parseFloat(a.dataset.scrollRatio):1,y=typeof a.dataset.dragRatio=="string"?parseFloat(a.dataset.dragRatio):1;async function S(){await A(h),_=!0,a.classList.add("is-init")}function D(e,i){const r=gsap.timeline();gsap.set(e,{rotateY:-90,rotateX:-10,xPercent:200,z:"100vw",zIndex:100,"--relativeProgress":0}),r.fromTo(e,{xPercent:200},{xPercent:-200,duration:1,ease:"power1.inOut",immediateRender:!1});const p=gsap.timeline();p.to(e,{rotateY:0,rotateX:0,"--relativeProgress":1,duration:.45,ease:"power1.in"}).to(e,{rotateY:-70,rotateX:10,"--relativeProgress":0,duration:.45,ease:"power1.out"},.55),r.add(p,0);const b=gsap.timeline();return b.set(e,{z:"100vw",zIndex:100}).to(e,{z:0,zIndex:0,duration:.5,ease:"power1.out"},0).to(e,{z:"-50vw",zIndex:-50,duration:.5,ease:"power1.in"},.5),r.add(b,0),r}const c=z(v,g,D),L={offset:0},M=gsap.utils.wrap(0,c.duration());let u=0;const s=gsap.to(L,{offset:0,onUpdate(){c.time(M(L.offset))},duration:.4,ease:"power3",paused:!0});function A(e){const i=e.map(r=>(r.src=r.dataset.src,!r||r.complete?Promise.resolve():new Promise(p=>{const b=()=>p();r.addEventListener("load",b,{once:!0}),r.addEventListener("error",b,{once:!0})})));return Promise.all(i)}function O(e){let i=n.end-n.start;return gsap.utils.clamp(n.start+1,n.end-1,n.start+gsap.utils.wrap(0,1,e)*i)}function T(e,i){d+=e,n.scroll(i),n.update()}function w(e){let i=m(e);if(l){u=i-n.progress*c.duration()*o,s.vars.offset=i,s.invalidate().restart();return}u=0;let r=i/(c.duration()*o)-d,p=O(r);if(r>=1||r<0)return T(Math.floor(r),p);s.vars.offset=i,s.invalidate().restart(),n.scroll(p),n.update()}let _=!1;const n=ScrollTrigger.create({trigger:f,start:l?"top bottom":"top top",end:l?"bottom top":`+=${v.length*1e3}`,pin:l?!1:a,onUpdate(e){if(_)if(l)s.vars.offset=e.progress*c.duration()*o+u,s.invalidate().restart();else{let i=e.scroll()-e.start,r=e.end-e.start;i>r-1?T(1,e.start+1):i<1&&e.direction<0?T(-1,e.start+r-2):(s.vars.offset=(d+e.progress)*c.duration()*o+u,s.invalidate().restart())}}});return!l&&!q&&ScrollTrigger.addEventListener("scrollEnd",()=>{_&&w(s.vars.offset)}),Draggable.create(t.querySelector(".vsqh01-1-drag-proxy"),{type:"x",trigger:a,onPress(){this.startOffset=u},onDrag(){const e=(this.startX-this.x)*.001*y;u=this.startOffset+e,l?s.vars.offset=n.progress*c.duration()*o+u:s.vars.offset=(d+n.progress)*c.duration()*o+u,s.invalidate().restart()},onDragEnd(){q||w(s.vars.offset)}}),S(),{next:()=>w(s.vars.offset+g),prev:()=>w(s.vars.offset-g)}}function I(){const t=[];return typeof gsap>"u"&&t.push("GSAP"),typeof ScrollTrigger>"u"&&t.push("ScrollTrigger"),typeof Draggable>"u"&&t.push("Draggable"),t.length?(console.error("VSQH01_1: Missing: "+t.join(", ")),!1):!0}function x(){I()&&(E(),document.querySelectorAll(".vsqh01-1-slider").forEach(t=>{t._vsqh01_1||(t._vsqh01_1=P(t))}))}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",x):setTimeout(x,0),R.VSQH01_1={init:x,initSlider:P}})(typeof window<"u"?window:void 0)})();
