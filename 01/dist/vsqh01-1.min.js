(function(){"use strict";(function(P){const z=".vsqh01-1-slider{display:block;position:relative;width:100vw;height:100vh;inset:0;z-index:1;font-family:'Instrument Serif',serif;&:not(.is-init){cursor:wait !important}}.vsqh01-1-slider_track{position:absolute;width:100vw;height:100vh;display:grid;place-items:center;overflow:hidden;color:white;background-color:black}.vsqh01-1-slider_list{perspective:1500px;aspect-ratio:9/16;opacity:0;transition:opacity 1s ease-out;.vsqh01-1-slider.is-init &{opacity:1}@media (orientation:landscape){height:75vh}@media (orientation:portrait){height:75vw}}.vsqh01-1-slider_card{position:absolute;inset:0;border-radius:12px;overflow:hidden;will-change:transform;backface-visibility:hidden;contain:layout paint;transform-style:preserve-3d;img{width:100%;height:100%;object-fit:cover}&::after{content:'';position:absolute;inset:0;opacity:0;background-color:black;opacity:calc(1 - var(--relativeProgress))}}.vsqh01-1-drag-proxy{visibility:hidden;position:absolute;inset:0}";function I(){if(typeof document>"u"||document.getElementById("vsqh01-1-styles"))return;const e=document.createElement("style");e.id="vsqh01-1-styles",e.textContent=z,document.head.appendChild(e)}function L(e,n,f){let s=Math.ceil(1/n),u=e.length*n+.5,v=(e.length+s)*n+1,g=gsap.timeline({paused:!0}),h=gsap.timeline({paused:!0,repeat:-1,onRepeat(){this._time===this._dur&&(this._tTime+=this._dur-.01)}}),w=e.length+s*2,l,o,m;for(o=0;o<w;o++)m=o%e.length,l=o*n,g.add(f(e[m],m),l),o<=e.length&&h.add("label"+o,l);g.time(u);let q=Math.min(s*n+1,u-.01);return h.to(g,{time:v,duration:v-u,ease:"none"}).fromTo(g,{time:q},{time:u,duration:u-q,immediateRender:!1,ease:"none"}),h}function R(e){if(gsap.registerPlugin(ScrollTrigger,Draggable),!e.querySelector(".vsqh01-1-drag-proxy")){const t=document.createElement("div");t.className="vsqh01-1-drag-proxy",e.appendChild(t)}let n=0;const f=.18,s=e,u=e.querySelector(".vsqh01-1-slider_track"),v=gsap.utils.toArray(".vsqh01-1-slider_card"),g=gsap.utils.toArray(".vsqh01-1-slider_card img"),h=gsap.utils.snap(f),w=typeof s.dataset.disableMagnet=="string",l=typeof s.dataset.disableFullscreen=="string",o=typeof s.dataset.scrollRatio=="string"?parseFloat(s.dataset.scrollRatio):1,m=typeof s.dataset.dragRatio=="string"?parseFloat(s.dataset.dragRatio):1;async function q(){await loadImages(g),_=!0,s.classList.add("is-init")}q();function E(t,c){const a=gsap.timeline();gsap.set(t,{rotateY:-90,rotateX:-10,xPercent:200,z:"100vw",zIndex:100,"--relativeProgress":0}),a.fromTo(t,{xPercent:200},{xPercent:-200,duration:1,ease:"power1.inOut",immediateRender:!1});const y=gsap.timeline();y.to(t,{rotateY:0,rotateX:0,"--relativeProgress":1,duration:.45,ease:"power1.in"}).to(t,{rotateY:-70,rotateX:10,"--relativeProgress":0,duration:.45,ease:"power1.out"},.55),a.add(y,0);const b=gsap.timeline();return b.set(t,{z:"100vw",zIndex:100}).to(t,{z:0,zIndex:0,duration:.5,ease:"power1.out"},0).to(t,{z:"-50vw",zIndex:-50,duration:.5,ease:"power1.in"},.5),a.add(b,0),a}const d=L(v,f,E),k={offset:0},M=gsap.utils.wrap(0,d.duration());let p=0;const r=gsap.to(k,{offset:0,onUpdate(){d.time(M(k.offset))},duration:.4,ease:"power3",paused:!0});function O(t){let c=i.end-i.start;return gsap.utils.clamp(i.start+1,i.end-1,i.start+gsap.utils.wrap(0,1,t)*c)}function T(t,c){n+=t,i.scroll(c),i.update()}function S(t){if(l){let b=h(t);p=b-i.progress*d.duration(),r.vars.offset=b,r.invalidate().restart();return}let c=h(t),a=(c-d.duration()*n)/d.duration(),y=O(a);if(a>=1||a<0)return T(Math.floor(a),y);r.vars.offset=(n+i.progress)*d.duration(),r.invalidate().restart(),i.scroll(y),i.update()}let _=!1;const i=ScrollTrigger.create({trigger:u,start:l?"top bottom":"top top",end:l?"bottom top":`+=${v.length*1e3}`,pin:l?!1:s,onUpdate(t){if(_)if(l)r.vars.offset=t.progress*d.duration()*o+p,r.invalidate().restart();else{let c=t.scroll()-t.start,a=t.end-t.start;c>a-1?T(1,t.start+1):c<1&&t.direction<0?T(-1,t.start+a-2):(r.vars.offset=(n+t.progress)*d.duration()*o+p,r.invalidate().restart())}}});return!l&&!w&&ScrollTrigger.addEventListener("scrollEnd",()=>{_&&S(r.vars.offset)}),Draggable.create(e.querySelector(".vsqh01-1-drag-proxy"),{type:"x",trigger:s,onPress(){this.startOffset=p},onDrag(){const t=(this.startX-this.x)*.001*m;p=this.startOffset+t,l?r.vars.offset=i.progress*d.duration()*o+p:r.vars.offset=(n+i.progress)*d.duration()*o+p,r.invalidate().restart()},onDragEnd(){w||S(r.vars.offset)}}),{next:()=>S(r.vars.offset+f),prev:()=>S(r.vars.offset-f)}}function D(){const e=[];return typeof gsap>"u"&&e.push("GSAP"),typeof ScrollTrigger>"u"&&e.push("ScrollTrigger"),typeof Draggable>"u"&&e.push("Draggable"),e.length?(console.error("VSQH01_1: Missing: "+e.join(", ")),!1):!0}function x(){D()&&(I(),document.querySelectorAll(".vsqh01-1-slider").forEach(e=>{e._vsqh01_1||(e._vsqh01_1=R(e))}))}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",x):setTimeout(x,0),P.VSQH01_1={init:x,initSlider:R}})(typeof window<"u"?window:void 0)})();
